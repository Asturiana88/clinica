"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[864],{5864:(Z,u,s)=>{s.r(u),s.d(u,{EspecialistaTurnosModule:()=>X});var p=s(8583),_=s(7202),t=s(639),l=s(9726),d=s(5058),m=s(9039),f=s(6790);class C{}var c=s(665),x=s(6057),g=s(3290),T=s(9410);let M=(()=>{class e{constructor(){}transform(n){const o=Object.keys(n)[0];return`<strong>${o}</strong>: ${n[o]}`}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"formatDynamicValue",type:e,pure:!0}),e})();function v(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"span",14),t.NdJ("click",function(){const r=t.CHM(n).$implicit;return t.oxw().eliminarDatoOpcional(r)}),t._uU(2,"X"),t.qZA(),t._UZ(3,"span",15),t.ALo(4,"safeHtml"),t.ALo(5,"formatDynamicValue"),t.qZA()}if(2&e){const n=a.$implicit;t.xp6(3),t.Q6J("innerHTML",t.lcZ(4,1,t.lcZ(5,3,n)),t.oJD)}}function A(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"input",17),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw().datoOpcionalNombre=i}),t.qZA(),t.TgZ(2,"input",18),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw().datoOpcionalValor=i}),t.qZA(),t.TgZ(3,"div",19),t.NdJ("click",function(){return t.CHM(n),t.oxw().agregarDatoOpcional()}),t._uU(4,"Agregar dato"),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.datoOpcionalNombre),t.xp6(1),t.Q6J("ngModel",n.datoOpcionalValor)}}function b(e,a){if(1&e&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(n.submitError)}}let E=(()=>{class e{constructor(n){this.store=n,this.callbackFunc=new t.vpe(!1),this.historia=new C,this.datosOpcionales=[],this.validarDatos=!1,this.captchaSolved=!1,this.that=this,this.inputs=[{name:"altura",requiredError:"La altura es requerida"},{name:"peso",requiredError:"El peso es requerida"},{name:"temperatura",requiredError:"La temperatura es requerida"},{name:"presion",requiredError:"La presion es requerida"}]}resolved(n){this.captchaSolved=!0}ngOnInit(){}agregarDatoOpcional(){this.datoOpcionalNombre&&this.datoOpcionalValor&&(this.datosOpcionales.push({[this.datoOpcionalNombre]:this.datoOpcionalValor}),this.datoOpcionalValor="",this.datoOpcionalNombre="")}eliminarDatoOpcional(n){this.datosOpcionales=this.datosOpcionales.filter(o=>o!==n)}finalizar(n){let o=this;if(n&&(o=n),o.captchaSolved){if(o.datosOpcionales){const i=o.datosOpcionales.reduce((r,h)=>Object.assign(Object.assign({},r),h),{});o.historia=Object.assign(Object.assign({},o.historia),i)}o.turno&&o.turno.id&&o.store.UpdateTurno(o.turno.id,Object.assign(Object.assign({},o.turno),{historiaClinica:Object.assign({},o.historia),comentario:o.comentario,estado:"finalizado"})).then(()=>{o.callbackFunc&&o.callbackFunc.emit(!0)}).catch(i=>{o.submitError=i})}else o.submitError="Resolver el captcha para continuar"}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.TM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-historia-clinica-form"]],inputs:{turno:"turno"},outputs:{callbackFunc:"callbackFunc"},decls:32,vars:11,consts:[[1,"p-5","pt-0"],["appFormValidations","",3,"that","submit","inputs"],[1,"my-3"],["type","number","name","temperatura","placeholder","Temperatura",3,"ngModel","ngModelChange"],["type","number","name","altura","placeholder","Altura",3,"ngModel","ngModelChange"],["type","number","name","peso","placeholder","Peso",3,"ngModel","ngModelChange"],["type","number","name","presion","placeholder","Presion",3,"ngModel","ngModelChange"],["class","my-3",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["name","comentario",1,"w-100",3,"ngModel","ngModelChange"],["id","pacienteCaptcha"],["siteKey","6LcCcHAdAAAAAJe3md0bC_Y0Eg6yv-eARP9k9PPB",3,"resolved"],["type","submit",1,"btn","btn-primary","mt-4"],["class","text-danger",4,"ngIf"],[1,"text-danger",2,"cursor","pointer",3,"click"],[1,"mx-3",3,"innerHTML"],[1,"mt-2"],["type","text","name","datoOpcionalNombre","placeholder","Nombre dato",3,"ngModel","ngModelChange"],["type","text","name","datoOpcionalValor","placeholder","Valor",1,"mx-3",3,"ngModel","ngModelChange"],[1,"btn","btn-info","mt-3",3,"click"],[1,"text-danger"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h5"),t._uU(2," Historia Clinica "),t.qZA(),t.TgZ(3,"form",1),t.TgZ(4,"div",2),t.TgZ(5,"input",3),t.NdJ("ngModelChange",function(r){return o.historia.temperatura=r}),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(r){return o.historia.altura=r}),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.TgZ(9,"input",5),t.NdJ("ngModelChange",function(r){return o.historia.peso=r}),t.qZA(),t.qZA(),t.TgZ(10,"div",2),t.TgZ(11,"input",6),t.NdJ("ngModelChange",function(r){return o.historia.presion=r}),t.qZA(),t.qZA(),t._UZ(12,"hr"),t.TgZ(13,"h6"),t._uU(14,"Datos adicionales"),t.qZA(),t.YNc(15,v,6,5,"div",7),t.YNc(16,A,5,2,"div",8),t._UZ(17,"hr"),t.TgZ(18,"h6"),t._uU(19,"Comentario"),t.qZA(),t.TgZ(20,"div"),t.TgZ(21,"i",2),t._uU(22,"Opcional"),t.qZA(),t._UZ(23,"br"),t.TgZ(24,"textarea",9),t.NdJ("ngModelChange",function(r){return o.comentario=r}),t.qZA(),t.qZA(),t._UZ(25,"div",10),t._UZ(26,"br"),t.TgZ(27,"re-captcha",11),t.NdJ("resolved",function(r){return o.resolved(r)}),t.qZA(),t.TgZ(28,"button",12),t._uU(29," Submit "),t.qZA(),t.TgZ(30,"div",2),t.YNc(31,b,2,1,"span",13),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("that",o.that)("submit",o.finalizar)("inputs",o.inputs),t.xp6(2),t.Q6J("ngModel",o.historia.temperatura),t.xp6(2),t.Q6J("ngModel",o.historia.altura),t.xp6(2),t.Q6J("ngModel",o.historia.peso),t.xp6(2),t.Q6J("ngModel",o.historia.presion),t.xp6(4),t.Q6J("ngForOf",o.datosOpcionales),t.xp6(1),t.Q6J("ngIf",!o.datosOpcionales||o.datosOpcionales.length<3),t.xp6(8),t.Q6J("ngModel",o.comentario),t.xp6(7),t.Q6J("ngIf",o.submitError))},directives:[c._Y,c.JL,c.F,x.V,c.wV,c.Fj,c.JJ,c.On,p.sg,p.O5,g.wT],pipes:[T.z,M],styles:[""]}),e})();var q=s(6839);function J(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",7),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).handleOpenModal(i,"cancelado")}),t._uU(2,"Cancelar"),t.qZA(),t.BQk()}}function F(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",8),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).handleOpenModal(i,"finalizar")}),t._uU(2,"Finalizar"),t.qZA(),t.BQk()}}function O(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).handleOpenModal(i,"comentario")}),t._uU(2,"Ver comentario"),t.qZA(),t.BQk()}}function y(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",7),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).handleOpenModal(i,"rechazar")}),t._uU(2,"Rechazar"),t.qZA(),t.BQk()}}function N(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",10),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).updateEstado(i,"aceptado")}),t._uU(2,"Aceptar"),t.qZA(),t.BQk()}}function U(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).handleOpenModal(i,"encuestaVer")}),t._uU(2,"Ver encuesta"),t.qZA(),t.BQk()}}function H(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",12),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).handleOpenModal(i,"calificacion")}),t._uU(2,"Ver calificacion"),t.qZA(),t.BQk()}}function k(e,a){1&e&&(t.ynx(0),t.TgZ(1,"button",13),t._uU(2,"Dar Calificacion"),t.qZA(),t.BQk())}function Q(e,a){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t._UZ(9,"td",6),t.ALo(10,"safeHtml"),t.ALo(11,"estadoTurno"),t.TgZ(12,"td"),t.YNc(13,J,3,0,"ng-container",4),t.YNc(14,F,3,0,"ng-container",4),t.YNc(15,O,3,0,"ng-container",4),t.YNc(16,y,3,0,"ng-container",4),t.YNc(17,N,3,0,"ng-container",4),t.YNc(18,U,3,0,"ng-container",4),t.YNc(19,H,3,0,"ng-container",4),t.YNc(20,k,3,0,"ng-container",4),t.qZA(),t.qZA()),2&e){const n=a.$implicit;t.xp6(2),t.hij(" ",n.fecha," "),t.xp6(2),t.hij(" ",n.hora," "),t.xp6(2),t.hij(" ",n.especialidad.nombre," "),t.xp6(2),t.hij(" ",n.paciente.nombre," "),t.xp6(1),t.Q6J("innerHTML",t.lcZ(10,13,t.lcZ(11,15,n.estado)),t.oJD),t.xp6(4),t.Q6J("ngIf","aceptado"==n.estado),t.xp6(1),t.Q6J("ngIf","aceptado"==n.estado),t.xp6(1),t.Q6J("ngIf",n.resena),t.xp6(1),t.Q6J("ngIf","pendiente"==n.estado),t.xp6(1),t.Q6J("ngIf","pendiente"==n.estado),t.xp6(1),t.Q6J("ngIf",n.encuesta),t.xp6(1),t.Q6J("ngIf",n.calificacion),t.xp6(1),t.Q6J("ngIf","finalizado"==n.estado&&n.encuesta&&!n.calificacion)}}function w(e,a){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Q,21,17,"tr",5),t.qZA()),2&e){const n=a.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function D(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-modal",14),t.NdJ("onClose",function(){return t.CHM(n),t.oxw().closeModal()}),t.TgZ(2,"div",15),t.TgZ(3,"h3"),t._uU(4,"Calificacion paciente"),t.qZA(),t.TgZ(5,"h5",16),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(6),t.Oqu(null==n.turnoSelected?null:n.turnoSelected.calificacion)}}function I(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-modal",14),t.NdJ("onClose",function(){return t.CHM(n),t.oxw().closeModal()}),t.TgZ(2,"div",15),t.TgZ(3,"h3"),t._uU(4,"Encuesta paciente"),t.qZA(),t.TgZ(5,"h5",16),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(6),t.Oqu(null==n.turnoSelected?null:n.turnoSelected.encuesta)}}function S(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-modal",14),t.NdJ("onClose",function(){return t.CHM(n),t.oxw().closeModal()}),t.TgZ(2,"app-historia-clinica-form",17),t.NdJ("callbackFunc",function(){return t.CHM(n),t.oxw().updateData()}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("turno",n.turnoSelected)}}function Y(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-modal",14),t.NdJ("onClose",function(){return t.CHM(n),t.oxw().closeModal()}),t.TgZ(2,"h3"),t._uU(3,"Indique la razon por la que quiere rechazar el turno"),t.qZA(),t.TgZ(4,"input",18),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw().resena=i}),t.qZA(),t.TgZ(5,"button",19),t.NdJ("click",function(){return t.CHM(n),t.oxw().turnoUpdateModal("cancelado")}),t._uU(6," Cancelar Turno "),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.resena)}}function z(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-modal",14),t.NdJ("onClose",function(){return t.CHM(n),t.oxw().closeModal()}),t.TgZ(2,"h3"),t._uU(3,"Indique la razon por la que quiere rechazar el turno"),t.qZA(),t.TgZ(4,"input",18),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw().resena=i}),t.qZA(),t.TgZ(5,"button",20),t.NdJ("click",function(){return t.CHM(n),t.oxw().turnoUpdateModal("rechazado")}),t._uU(6," Rechazar "),t.qZA(),t.TgZ(7,"button",19),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeModal()}),t._uU(8," Cancelar "),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.resena)}}function j(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-modal",14),t.NdJ("onClose",function(){return t.CHM(n),t.oxw().closeModal()}),t.TgZ(2,"div",21),t.TgZ(3,"h2"),t._uU(4,"Comentario"),t.qZA(),t.TgZ(5,"h5",16),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(6),t.Oqu(null==n.turnoSelected?null:n.turnoSelected.resena)}}const V=[{path:"",component:(()=>{class e{constructor(n,o){this.storeService=n,this.authService=o,this.especialidades=this.storeService.GetEspecialidades(),this.modal={resena:!1},this.filtros={}}handleOpenModal(n,o){this.turnoSelected=n,this.modal[o]=!0}handleCloseModals(){this.updateData(),this.turnoSelected=void 0,this.modal={}}handlePacienteFiltro(){this.turnosFiltrados=this.turnos&&this.pacienteFiltro?this.turnos.filter(n=>n.paciente.nombre.toLocaleLowerCase().includes(this.pacienteFiltro.toLocaleLowerCase())):this.turnos}updateData(n){n&&(this.filtros=n),this.turnos=this.storeService.GetTurnos(Object.assign({especialista:this.authService.getUser},this.filtros)),this.handlePacienteFiltro(),this.closeModal()}turnoUpdateModal(n){const o=this.turnoSelected;!o||!this.resena||(this.storeService.UpdateTurno(o.id||"",Object.assign(Object.assign({},o),{estado:n,resena:this.resena})),this.updateData(),this.closeModal())}closeModal(){this.modal={},this.resena="",this.turnoSelected=void 0}updateEstado(n,o){this.storeService.UpdateTurno(n.id||"",Object.assign(Object.assign({},n),{estado:o})),this.updateData()}ngOnInit(){this.updateData(),this.turnosFiltrados=this.turnos}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.TM),t.Y36(d.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-especialista-turnos"]],decls:24,vars:7,consts:[[3,"filtrosChange"],[1,"row"],[1,"col-12"],[1,"table","table-dark"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-info","mx-2",3,"click"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-success","mx-2",3,"click"],[1,"btn","btn-warning","mx-2",3,"click"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-primary"],[3,"onClose"],[1,"p-5","pt-0"],[1,"mt-4"],[3,"turno","callbackFunc"],["type","text","name","resena",1,"mt-3",3,"ngModel","ngModelChange"],[1,"btn","btn-danger","mt-4",3,"click"],[1,"btn","btn-success","mt-4",3,"click"],[1,"p-5","pt-2"]],template:function(n,o){1&n&&(t.TgZ(0,"app-turno-filtros",0),t.NdJ("filtrosChange",function(r){return o.updateData(r)}),t.qZA(),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"table",3),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7,"Fecha"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Hora"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Especialidad"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Paciente"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Estado"),t.qZA(),t._UZ(16,"td"),t.qZA(),t.qZA(),t.YNc(17,w,2,1,"tbody",4),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,D,7,1,"div",4),t.YNc(19,I,7,1,"div",4),t.YNc(20,S,3,1,"div",4),t.YNc(21,Y,7,1,"div",4),t.YNc(22,z,9,1,"div",4),t.YNc(23,j,7,1,"div",4)),2&n&&(t.xp6(17),t.Q6J("ngIf",o.turnosFiltrados),t.xp6(1),t.Q6J("ngIf",o.modal.calificacion),t.xp6(1),t.Q6J("ngIf",o.modal.encuestaVer),t.xp6(1),t.Q6J("ngIf",o.modal.finalizar&&o.turnoSelected),t.xp6(1),t.Q6J("ngIf",o.modal.cancelado),t.xp6(1),t.Q6J("ngIf",o.modal.rechazar),t.xp6(1),t.Q6J("ngIf",o.modal.comentario))},directives:[m.Y,p.O5,p.sg,f.z,E,c.Fj,c.JJ,c.On],pipes:[T.z,q.S],styles:[""]}),e})()}];let L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[_.Bz.forChild(V)],_.Bz]}),e})();var P=s(791),B=s(7860),$=s(1596),R=s(7947);let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,c.u5,c.UX,P.z,B.D,$.o,R.J,g.a,L]]}),e})()},7860:(Z,u,s)=>{s.d(u,{D:()=>t});var p=s(8583),_=s(639);let t=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275mod=_.oAB({type:l}),l.\u0275inj=_.cJS({imports:[[p.ez]]}),l})()}}]);